#!/usr/bin/env php
<?php

use Symfony\Component;
use Xylene\Console\Application;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\PhpFileLoader;

require __DIR__ . '/../vendor/autoload.php';

$container = new ContainerBuilder();

try {

    $loader = (new PhpFileLoader($container, new FileLocator(__DIR__ . '/../config')));

    $loader->load('parameters.php');
    $loader->load('services.php');

} catch (Exception $exc) {
    echo "=====";
    echo $exc->getMessage();
    echo "=====";
}

$container->compile();

try {

    ($container->get(Application::class))->run();

} catch (Exception $exc) {
    echo "=====";
    echo $exc->getMessage();
    echo "=====";
}
