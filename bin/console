#!/usr/bin/env php
<?php

declare(strict_types=1);

date_default_timezone_set('UTC');

use Symfony\Component\Dotenv\Dotenv;
use Xylene\Console\Application;
use Xylene\Container;

require __DIR__ . '/../vendor/autoload.php';

try
{

    (new Dotenv())->load(__DIR__ . '/../.env');

    $container = Container::buildContainer(dirname(__DIR__, 1));

    if (!$container->isCompiled()) {
        $container->compile();
    }

    ($container->get(Application::class))->run();

} catch(Exception $exc) {

    echo "EXCEPTION with MESSAGE thrown: " . $exc->getMessage();
}